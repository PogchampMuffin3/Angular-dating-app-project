<!-- GŁÓWNY KONTENER -->
<div class="container-fluid p-0 bg-light min-vh-100">

  <!-- 2. TREŚĆ GŁÓWNA (GRID) -->
  <div class="container mt-3 pb-5 mb-5">
    <div class="row justify-content-center">

      <!-- Lewa kolumna (Desktop - Menu skrótów) -->
      <div class="col-lg-3 d-none d-lg-block">
        <div class="card border-0 shadow-sm p-3">
          <div class="d-flex align-items-center mb-3">
            <div class="bg-secondary rounded-circle" style="width: 40px; height: 40px;"></div>
            <span class="ms-2 fw-bold">Twój Profil</span>
          </div>
          <hr>
          <ul class="list-unstyled">
            <li class="mb-2"><i class="bi bi-people text-primary me-2"></i> Grupy</li>
            <li class="mb-2"><i class="bi bi-calendar-event text-danger me-2"></i> Wydarzenia</li>
            <li><i class="bi bi-bookmark-star text-warning me-2"></i> Zapisane</li>
          </ul>
        </div>
      </div>

      <!-- Środkowa kolumna (POSTY) -->
      <div class="col-12 col-md-8 col-lg-6">

        <!-- Dodaj nowy post (ZMODYFIKOWANE DLA BACKENDU) -->
        <div class="card border-0 shadow-sm mb-4">
          <div class="card-body">
            <div class="d-flex">
              <div class="bg-secondary rounded-circle me-2" style="width: 40px; height: 40px;"></div>
              <!-- Tutaj dodaliśmy ngModel i obsługę Entera -->
              <input [(ngModel)]="newPostContent" (keyup.enter)="addPost()" type="text" class="form-control rounded-pill bg-light border-0" placeholder="Co słychać? (Naciśnij Enter aby dodać)">
            </div>
          </div>
        </div>

        <!-- LISTA POSTÓW Z BAZY DANYCH (ZAMIAST SZTYWNYCH KART) -->
        <!-- Jeśli nie ma postów, wyświetl komunikat -->
        <div *ngIf="posts.length === 0" class="text-center text-muted py-5">
          <i class="bi bi-chat-square-dots fs-1"></i>
          <p class="mt-2">Brak postów. Bądź pierwszy!</p>
        </div>

        <!-- Pętla *ngFor - generuje karty na podstawie danych z json-server -->
        <div *ngFor="let post of posts" class="card border-0 shadow-sm mb-4">
          <div class="card-header bg-white border-0 d-flex align-items-center">
            <!-- Kolor avatara też bierzemy z bazy -->
            <div [class]="post.avatarColor || 'bg-primary'" class="rounded-circle me-2" style="width: 40px; height: 40px;"></div>
            <div>
              <h6 class="mb-0 fw-bold">{{ post.author }}</h6>
              <small class="text-muted">{{ post.time }}</small>
            </div>
            <i class="bi bi-three-dots ms-auto" style="cursor: pointer;"></i>
          </div>

          <!-- Treść posta -->
          <div class="card-body">
            <p class="card-text">{{ post.content }}</p>
          </div>

          <!-- Stopka posta (lajki i przyciski) -->
          <div class="card-footer bg-white border-0 d-flex justify-content-between">

            <!-- PRZYCISK POLUBIENIA (ZMIENIONY) -->
            <button class="btn btn-sm w-100 d-flex align-items-center justify-content-center"
                    [class.text-danger]="isLikedByMe(post)"
                    [class.text-secondary]="!isLikedByMe(post)"
                    (click)="likePost(post)">
              <i class="bi me-1"
                 [class.bi-heart-fill]="isLikedByMe(post)"
                 [class.bi-heart]="!isLikedByMe(post)">
              </i>
              <span class="fw-bold">{{ post.likes || 0 }}</span>
            </button>

            <button class="btn btn-sm btn-light text-secondary w-100">
              <i class="bi bi-chat me-1"></i> Komentarz
            </button>

            <button class="btn btn-sm btn-light text-secondary w-100">
              <i class="bi bi-share me-1"></i> Udostępnij
            </button>
          </div>


        </div>

      <!-- Prawa kolumna (Desktop - Propozycje) -->
      <div class="col-lg-3 d-none d-lg-block">
        <div class="card border-0 shadow-sm p-3">
          <h6 class="text-muted mb-3">Propozycje dla Ciebie</h6>
          <div class="d-flex align-items-center justify-content-between mb-3">
            <div class="d-flex align-items-center">
              <div class="bg-secondary rounded-circle me-2" style="width: 35px; height: 35px;"></div>
              <small class="fw-bold">Marta, 24</small>
            </div>
            <button class="btn btn-sm btn-outline-primary rounded-pill"><i class="bi bi-person-plus"></i></button>
          </div>
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
              <div class="bg-secondary rounded-circle me-2" style="width: 35px; height: 35px;"></div>
              <small class="fw-bold">Tomek, 28</small>
            </div>
            <button class="btn btn-sm btn-outline-primary rounded-pill"><i class="bi bi-person-plus"></i></button>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
